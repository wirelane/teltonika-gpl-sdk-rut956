#include "common-mt7621/rutm.dtsi"
#include "common-mt7621/input-output.dtsi"
#include "common-mt7621/shiftreg.dtsi"
#include "common-mt7621/eth/4-lan-ports.dtsi"
#include "common-mt7621/leds/wan.dtsi"
#include "common-mt7621/leds/wifi.dtsi"

// PWR, RST |G0|G10|
// IN, OUT  |G8|G12|
// SR CTRL  |G5|G9|G11|
// WAN      |G41|G43|G45|S15|
// WIFI     |G6|G7|
// ETH      |S5-S14|
// 4G		|G13|G14|G16|G18|G42|G46|G47|G48|
// 4G 2		|G15|G17|G44|S0|S1|S2|S3|S4|
/ {
	model = "Teltonika RUTM12";

	ext_io {
		shift_io: shift_io@0 {
			/delete-property/ enable-gpios;
		};
	};

	gpio-export {
		compatible = "gpio-export";
		#size-cells = <0>;

		gpio_modem_reset_1 {
			gpio-export,name = "modem_reset";
			gpio-export,output = <0>;
			gpios = <&gpio 13 GPIO_ACTIVE_HIGH>;
		};

		gpio_modem_power_1 {
			gpio-export,name = "modem_power";
			gpio-export,output = <1>; //tmp
			gpios = <&gpio 14 GPIO_ACTIVE_HIGH>;
		};

		gpio_modem_status_1 {
			gpio-export,name = "modem_status";
			gpio-export,input = <0>;
			gpios = <&gpio 42 GPIO_ACTIVE_LOW>;
		};

		gpio_modem_reset_2 {
			gpio-export,name = "modem2_reset";
			gpio-export,output = <0>;
			gpios = <&gpio 17 GPIO_ACTIVE_HIGH>;
		};

		gpio_modem_power_2 {
			gpio-export,name = "modem2_power";
			gpio-export,output = <1>; //tmp
			gpios = <&gpio 15 GPIO_ACTIVE_HIGH>;
		};

		gpio_modem_status_2 {
			gpio-export,name = "modem2_status";
			gpio-export,input = <0>;
			gpios = <&gpio 44 GPIO_ACTIVE_LOW>;
		};
	};

	leds {
		led_wan_wifi {
			gpios = <&shift_io 15 GPIO_ACTIVE_HIGH>;
		};

		led_gen_3 {
			label = "mob_gen_3";
			gpios = <&gpio 18 GPIO_ACTIVE_HIGH>;
		};

		led_gen_4 {
			label = "mob_gen_4";
			gpios = <&gpio 16 GPIO_ACTIVE_HIGH>;
		};

		led_ssid_1 {
			label = "mob_ssid_1";
			gpios = <&gpio 47 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "timer"; // only
		};

		led_ssid_3 {
			label = "mob_ssid_3";
			gpios = <&gpio 48 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "timer"; // only
		};

		led_ssid_5 {
			label = "mob_ssid_5";
			gpios = <&gpio 46 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "timer"; //only
		};

		led_gen2_3 {
			label = "mob2_gen_3";
			gpios = <&shift_io 3 GPIO_ACTIVE_HIGH>;
		};

		led_gen2_4 {
			label = "mob2_gen_4";
			gpios = <&shift_io 4 GPIO_ACTIVE_HIGH>;
		};

		led_ssid2_1 {
			label = "mob2_ssid_1";
			gpios = <&shift_io 0 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "timer"; // only
		};

		led_ssid2_3 {
			label = "mob2_ssid_3";
			gpios = <&shift_io 1 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "timer"; // only
		};

		led_ssid2_5 {
			label = "mob2_ssid_5";
			gpios = <&shift_io 2 GPIO_ACTIVE_HIGH>;
			linux,default-trigger = "timer"; //only
		};

		led_eth_g4 {
			gpios = <&shift_io 5 GPIO_ACTIVE_HIGH>;
		};

		led_eth_g3 {
			gpios = <&shift_io 6 GPIO_ACTIVE_LOW>;
		};

		led_eth_g2 {
			gpios = <&shift_io 7 GPIO_ACTIVE_HIGH>;
		};

		led_eth_g1 {
			gpios = <&shift_io 8 GPIO_ACTIVE_HIGH>;
		};

		led_eth_g0 {
			gpios = <&shift_io 9 GPIO_ACTIVE_HIGH>;
		};

		led_eth_y4 {
			gpios = <&shift_io 10 GPIO_ACTIVE_HIGH>;
		};

		led_eth_y3 {
			gpios = <&shift_io 11 GPIO_ACTIVE_LOW>;
		};

		led_eth_y2 {
			gpios = <&shift_io 12 GPIO_ACTIVE_HIGH>;
		};

		led_eth_y1 {
			gpios = <&shift_io 13 GPIO_ACTIVE_HIGH>;
		};

		led_eth_y0 {
			gpios = <&shift_io 14 GPIO_ACTIVE_HIGH>;
		};
	};

	tlt_gpios {
		misc {
			GPIO_13 {
				line_name = "GPIO_MODEM_RESET_1";
			};
			GPIO_17 {
				line_name = "GPIO_MODEM_RESET_2";
			};
			GPIO_14 {
				line_name = "GPIO_MODEM_POWER_1";
			};
			GPIO_15 {
				line_name = "GPIO_MODEM_POWER_2";
			};
			GPIO_44 {
				line_name = "GPIO_MODEM_STATUS_1";
			};
			GPIO_42 {
				line_name = "GPIO_MODEM_STATUS_2";
			};
		};
	};
};

&mnfinfo {
	simpin3 {
		default = "";
		sec;
	};

	simpin4 {
		default = "";
		sec;
	};

	sim_cfg {
		default = "1111010_0000000_1211010_0000000";
	};
};

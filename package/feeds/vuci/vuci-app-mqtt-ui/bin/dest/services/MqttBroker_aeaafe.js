(function(d,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(d=typeof globalThis<"u"?globalThis:d||self,d["services/MqttBroker_js"]=u())})(this,function(){"use strict";function d(o,e,i,n,t,s,a,m){var r=typeof o=="function"?o.options:o;e&&(r.render=e,r.staticRenderFns=i,r._compiled=!0),n&&(r.functional=!0),s&&(r._scopeId="data-v-"+s);var c;if(a?(c=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),t&&t.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(a)},r._ssrRegister=c):t&&(c=m?function(){t.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:t),c)if(r.functional){r._injectStyles=c;var C=r.render;r.render=function(D,p){return c.call(p),C(D,p)}}else{var f=r.beforeCreate;r.beforeCreate=f?[].concat(f,c):[c]}return{exports:o,options:r}}const u={props:{section:{type:Object,required:!0},father:{type:String,required:!0}},data(){return{formData:{},directionOpts:[["out",this.$t("OUT")],["in",this.$t("IN")],["both",this.$t("BOTH")]],qosOpts:[["0",this.$t("At most once (0)")],["1",this.$t("At least once (1)")],["2",this.$t("Exactly once (2)")]]}},methods:{onBeforeSave(){return new Promise((o,e)=>{if(this.formData[this.father].some(n=>n.topic===this.section.topic&&this.section.id!==n.id))return e(this.$t("Configuration with name %s already exists").format(this.section.topic));o()})}}};var _=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"mosquitto",editing:"","before-save":e.onBeforeSave},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-named-section",{attrs:{name:e.section.id,title:e.$t("%s Configuration").format(e.section.topic),endpoints:[{endpoint:`mqtt/bridge/${e.section.id}/topics/config`}],"data-key":e.father,"uci-data":n},scopedSlots:e._u([{key:"default",fn:function({s:t}){return[i("vuci-form-item-input",{attrs:{"uci-section":t,name:"topic",label:e.$t("Topic name"),rules:"string",maxlength:"64",required:""}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"direction",label:e.$t("Direction"),initial:"out",help:e.$t("The direction that the messages will be shared in"),options:e.directionOpts}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"qos",label:e.$t("QoS"),initial:"0",help:e.$t("The publish/subscribe QoS level used for this topic"),options:e.qosOpts}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(n){e.formData=n},expression:"formData"}})},h=[],b=d(u,_,h,!1,null,null,null,null);const v=b.exports,$={inject:["formOptions"],props:{section:{type:Object,required:!0}},data(){return{editModal:v,formData:{},deviceFilesHint:`${this.$t("Choose this option if you want to select certificate files from device.")}<br>
      ${this.$t("Certificate files can be generated")} <a class=link href="/system/admin/certificates/generation">${this.$t("here")}</a>`,tlsVersionOpts:["tlsv1","tlsv1.1","tlsv1.2","tlsv1.3"],bridgeProtocolOpts:[["mqttv31","3.1"],["mqttv311","3.1.1"]],certificates:[],topicColumns:[{name:"topic",label:this.$t("Topic name")},{name:"direction",label:this.$t("Direction"),help:this.$t("The direction that the messages will be shared in")},{name:"qos",label:this.$t("Qos level"),help:this.$t("The publish/subscribe QoS level used for this topic")}],directionOpts:[["out",this.$t("OUT")],["in",this.$t("IN")],["both",this.$t("BOTH")]],qosOpts:[["0",this.$t("At most once (0)")],["1",this.$t("At least once (1)")],["2",this.$t("Exactly once (2)")]],errors:{1:this.$t("At least one topic is required to enable MQTT bridge")},passSetPlaceholder:this.$t("Password is set")}},computed:{keyOptions(){const e=this.formOptions().certificates.filter(i=>i.type==="key").map(i=>["/etc/certificates/"+i.fullname,i.fullname]);return e.length>0&&e.unshift(["",this.$t("None")]),e},certOptions(){const e=this.formOptions().certificates.filter(i=>(i.cert_type==="client"||i.cert_type==="server"||i.cert_type==="root_ca")&&i.type==="cert").map(i=>i.cert_type!=="root_ca"?["/etc/certificates/"+i.fullname,i.fullname]:["/etc/ssl/certs/"+i.fullname,i.fullname]);return e.length>0&&e.unshift(["",this.$t("None")]),e},caOptions(){return this.formOptions().certificates.filter(e=>(e.cert_type==="ca"||e.cert_type==="import"||e.cert_type==="root_ca")&&e.type==="cert").map(e=>e.cert_type!=="root_ca"?["/etc/certificates/"+e.fullname,e.fullname]:["/etc/ssl/certs/"+e.fullname,e.fullname])},mutatableSection(){return this.section}},methods:{deleteHints(){return this.checkReadonly()?[{info:this.$t("At least one topic is required when MQTT bridge is enabled")}]:[]},afterLoad(){this.mutatableSection.remote_password=""},onAfterSave(o,e){e.data.isPasswordSet=e.data.remote_password==="set",e.data.remote_password=""},onBeforeSave(){return new Promise((o,e)=>{const i=this.formData.bridgeData.some(t=>t.connection_name===this.section.connection_name&&this.section.id!==t.id),n=this.validateTopics();if(i)return e(this.$t("Configuration with connection name %s already exists").format(this.section.connection_name));if(n)return e(this.$t("At least one topic is required to enable MQTT bridge"));o()})},validateTopics(){const o=this.section,e=this.formData[o.id];return(e&&e.length===0||!e)&&o.client_enabled==="1"},addValidate(o){return this.formData[this.section.id].some(i=>i.topic===o.topic)?{message:this.$t("Topic with name %s already exists").format(o.topic),valid:!1}:{valid:!0}},displayDirection(o){return this.directionOpts.find(e=>e[0]===o)[1]},displayQoS(o){return this.qosOpts.find(e=>e[0]===o)[1]},checkReadonly(){if(this.section.client_enabled==="0")return!1;const o=this.formData[this.section.id];return o&&o.length<=1}}};var g=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"mosquitto",editing:"","after-load":e.afterLoad,"before-save":e.onBeforeSave},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-named-section",{attrs:{name:e.section.id,"uci-data":n,endpoints:[{endpoint:"mqtt/bridge/config"}],"data-key":"bridgeData",title:e.$t("Bridge configuration"),"after-save":e.onAfterSave},scopedSlots:e._u([{key:"default",fn:function({s:t}){return[i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"client_enabled",label:e.$t("Enable"),help:e.$t("Enable connection to remote bridge")}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"connection_name",label:e.$t("Connection name"),rules:"nospace",maxlength:"64",required:t.client_enabled==="1"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"bridge_protocol_version",label:e.$t("Protocol version"),help:e.$t("Version of the MQTT protocol"),options:e.bridgeProtocolOpts}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"remote_addr",label:e.$t("Remote address"),help:e.$t("Select remote bridge address"),rules:"host",placeholder:"0.0.0.0",required:t.client_enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"remote_port",label:e.$t("Remote port"),help:e.$t("Select remote port"),rules:"port",placeholder:"1883",required:t.client_enabled==="1"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"use_remote_tls",label:e.$t("Use remote TLS/SSL"),help:e.$t("Select to use TLS/SSL for remote connection")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"device_brg_files",label:e.$t("Certificate files from device"),help:e.deviceFilesHint,depend:t.use_remote_tls==="1",rawhtml:""}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"bridge_cafile",label:e.$t("Bridge CA file"),help:e.$t("Upload bridge CA file"),depend:t.use_remote_tls==="1"&&t.device_brg_files==="0",required:t.use_remote_tls==="1"&&t.device_brg_files==="0"&&t.client_enabled==="1","max-size":"16MB"}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"bridge_certfile",label:e.$t("Bridge certificate file"),help:e.$t("Upload bridge certificate file"),depend:t.use_remote_tls==="1"&&t.device_brg_files==="0","max-size":"16MB"}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"bridge_keyfile",label:e.$t("Bridge key file"),help:e.$t("Upload bridge key file"),depend:t.use_remote_tls==="1"&&t.device_brg_files==="0","max-size":"16MB"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"bridge_cafile",label:e.$t("Bridge CA file"),help:e.$t("Select bridge CA certificate from device"),options:e.caOptions,required:t.use_remote_tls==="1"&&t.device_brg_files==="1"&&t.client_enabled==="1",depend:t.use_remote_tls==="1"&&t.device_brg_files==="1","force-write":""}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"bridge_certfile",label:e.$t("Bridge certificate file"),help:e.$t("Select bridge certificate file from device"),options:e.certOptions,depend:t.use_remote_tls==="1"&&t.device_brg_files==="1","force-write":""}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"bridge_keyfile",label:e.$t("Bridge key file"),help:e.$t("Select bridge key certificate from device"),options:e.keyOptions,depend:t.use_remote_tls==="1"&&t.device_brg_files==="1","force-write":""}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"bridge_tls_version",label:e.$t("Bridge TLS version"),help:e.$t("Used bridge TLS version"),options:e.tlsVersionOpts,initial:"tlsv1.2",depend:t.use_remote_tls==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"bridge_alpn",label:e.$t("Bridge ALPN"),help:e.$t("Configure the application layer protocol negotiation        option for the TLS session. Useful for brokers that support        both websockets and MQTT on the same port."),depend:t.use_remote_tls==="1",rules:"string",maxlength:"254"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"use_bridge_login",label:e.$t("Use remote bridge login"),help:e.$t("Select to use login for bridge")}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"remote_clientid",label:e.$t("Remote ID"),help:e.$t("Choose remote client ID"),placeholder:"1",rules:"credentials_validate",maxlength:"256",depend:t.use_bridge_login==="1",required:t.client_enabled==="1"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"remote_username",label:e.$t("Remote username"),help:e.$t("Choose remote user name"),rules:"credentials_validate('allow-space')",maxlength:"512",depend:t.use_bridge_login==="1"}}),i("vuci-form-item-switch",{attrs:{name:"require_password","uci-section":t,label:e.$t("Require password"),initial:t.isPasswordSet?"1":"0",depend:t.use_bridge_login==="1","no-write":""}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"remote_password",label:e.$t("Remote password"),help:e.$t("Choose remote password"),rules:"credentials_validate('allow-space')",maxlength:"512",depend:t.use_bridge_login==="1"&&t.require_password==="1",password:"","no-write":t.remote_password===""&&t.require_password==="1",required:!t.isPasswordSet&&t.require_password==="1",placeholder:t.isPasswordSet?e.passSetPlaceholder:""}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"try_private",label:e.$t("Try private"),help:e.$t("Check if remote broker is another instance of a daemon")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"cleansession",label:e.$t("Clean session"),help:e.$t("Discard session state when connecting or disconnecting")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"notifications",label:e.$t("Enable notifications"),help:e.$t("Publish notification messages to the local and remote brokers giving information about the state of the bridge connection")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"notifications_local",label:e.$t("Enable local notifications"),help:e.$t("Only publish notification messages to the local broker giving information about the state of the bridge connection")}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"keepalive_interval",label:e.$t("Keepalive interval"),help:e.$t("Set the keepalive interval for this bridge connection, in seconds"),rules:"irange(5,65535)",placeholder:"60"}})]}}],null,!0)}),i("vuci-typed-section",{attrs:{type:"topic",title:e.$t("Topics"),columns:e.topicColumns,"edit-form":e.editModal,endpoints:[{endpoint:`mqtt/bridge/${e.section.id}/topics/config`}],"data-key":e.section.id,"uci-data":n,"edit-form-props":{father:e.section.id},"add-validate":e.addValidate},scopedSlots:e._u([{key:"topic",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"topic"}})]}},{key:"direction",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"direction","display-value":e.displayDirection}})]}},{key:"qos",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"qos","display-value":e.displayQoS}})]}},{key:"addForm",fn:function({addModel:t}){return[i("tlt-form-item-input",{attrs:{label:e.$t("Topic name"),prop:"topic",rules:"string",maxlength:"64",required:""},model:{value:t.topic,callback:function(s){e.$set(t,"topic",s)},expression:"addModel.topic"}})]}},{key:"deleteBtn",fn:function({s:t,actions:s}){return[i("tlt-hint",{attrs:{hints:e.deleteHints(),"align-right":""}},[i("tlt-button",{attrs:{"button-id":"delete",type:"text",color:"error",size:"md",readonly:e.checkReadonly()},on:{click:function(a){return s.delete(t.id)}}},[e._v(" "+e._s(e.$t("Delete"))+" ")])],1)]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(n){e.formData=n},expression:"formData"}})},y=[],k=d($,g,y,!1,null,null,null,null);const S=k.exports,w={provide(){return{formOptions:this.getFormOptions}},data(){return{formData:{},formOptions:{certificates:[]},editModal:S,brokerTabs:[{tab:"security",title:this.$t("Security")},{tab:"misc",title:this.$t("Miscellaneous")}],tlsTypeOpts:[["cert",this.$t("Certificate based")],["psk",this.$t("Pre-Shared-Key based")]],deviceFilesHint:`${this.$t("Choose this option if you want to select certificate files from device.")}<br>
      ${this.$t("Certificate files can be generated")} <a class=link href="/system/admin/certificates/generation">${this.$t("here")}</a>`,tlsVersionOpts:[["tlsv1.1","tlsv1.1"],["tlsv1.2","tlsv1.2"],["tlsv1.3","tlsv1.3"],["all",this.$t("Support all")]],bridgeColumns:[{name:"connection_name",label:this.$t("Bridge connection name")},{name:"client_enabled",label:this.$t("Enable client")}],isPskSet:!1,pskSetPlaceholder:this.$t("Pre-Shared-Key is set")}},computed:{customConfiguration(){var o,e,i;return((i=(e=(o=this.formData)==null?void 0:o.brokerData)==null?void 0:e[0])==null?void 0:i.custom_enabled)!=="1"},keyOptions(){var i,n,t;const e=this.formOptions.certificates.filter(s=>s.type==="key").map(s=>["/etc/certificates/"+s.fullname,s.fullname]);return e.length>0&&((t=(n=(i=this.formData)==null?void 0:i.brokerData)==null?void 0:n[0])==null?void 0:t.require_certificate)==="0"&&e.unshift(["",this.$t("None")]),e},certOptions(){var i,n,t;const e=this.formOptions.certificates.filter(s=>s.type==="cert").map(s=>s.cert_type!=="root_ca"?["/etc/certificates/"+s.fullname,s.fullname]:["/etc/ssl/certs/"+s.fullname,s.fullname]);return e.length>0&&((t=(n=(i=this.formData)==null?void 0:i.brokerData)==null?void 0:n[0])==null?void 0:t.require_certificate)==="0"&&e.unshift(["",this.$t("None")]),e},caOptions(){return this.formOptions.certificates.filter(e=>(e.cert_type==="ca"||e.cert_type==="import"||e.cert_type==="root_ca")&&e.type==="cert").map(e=>e.cert_type!=="root_ca"?["/etc/certificates/"+e.fullname,e.fullname]:["/etc/ssl/certs/"+e.fullname,e.fullname])}},methods:{addValidate(o){return this.formData.bridgeData.some(i=>i.connection_name===o.connection_name)?{message:this.$t("Bridge with connection name %s already exists").format(o.connection_name),valid:!1}:{valid:!0}},loadData(o){const e={},n=["/api/certificates/config",...o.bridgeData.map(t=>`/api/mqtt/bridge/${t.id}/topics/config`)];return this.$axios.bulkGet(n).then(t=>{const s=t.shift();return s.success?this.formOptions.certificates=s.data.generated:this.$message.error(this.$t("Failed to load certificates")),t.forEach((a,m)=>{const r=o.bridgeData[m].id;a.success?e[r]=a.data:this.$message.error(this.$t("Failed to load topic data."))}),this.isPskSet=o.brokerData[0].psk==="set",o.brokerData[0].psk="",o.bridgeData.forEach(a=>{a.isPasswordSet=a.remote_password==="set"}),e}).catch(()=>{this.$message.error(this.$t("An unexpected error occurred"))})},onAfterSave(o,e){this.isPskSet=e.data.psk==="set",e.data.psk=""},getFormOptions(){return this.formOptions},validateTopics(o,e){return o.some(i=>(e[i.id]&&e[i.id].length===0||!e[i.id])&&i.client_enabled==="1")},validateEnable(o){if(o.model==="0"||!o.uciSection.client_enabled||o.uciSection.client_enabled==="0")return;const{bridgeData:e,...i}=this.formData,{remote_addr:n,remote_port:t,use_bridge_login:s,remote_clientid:a}=o.uciSection,m=this.validateTopics(e,i),r=[];m&&(this.$message.error(this.$t("At least one topic is required to enable MQTT bridge")),o.model="0"),n||r.push(this.$t("Remote address")),t||r.push(this.$t("Remote port")),s==="1"&&!a&&r.push(this.$t("Remote ID")),r.length===1&&(this.$message.error(this.$t("Missing required option: %s").format(r.join(", "))),o.model="0"),r.length>1&&(this.$message.error(this.$t("Missing required options: %s").format(r.join(", "))),o.model="0")},afterDelete(o,e){delete e[o.id]}}};var T=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"mosquitto","after-load":e.loadData},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-named-section",{attrs:{name:"mqtt","uci-data":n,endpoints:[{endpoint:"mqtt/broker/config"}],"data-key":"brokerData",help:e.$t("The broker will “listen” for connections on the specified Local port."),"after-save":e.onAfterSave},scopedSlots:e._u([{key:"default",fn:function({s:t}){return[i("tlt-card",{attrs:{title:e.$t("MQTT")}},[i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"enabled",label:e.$t("MQTT broker"),help:e.$t("Select to enable MQTT")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"custom_enabled",label:e.$t("Custom configuration"),help:e.$t("Enables reading of custom configuration")}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"custom_section_id",label:e.$t("Custom Configuration file"),help:e.$t("Upload configuration file"),depend:t.custom_enabled==="1",required:t.enabled==="1"&&t.custom_enabled==="1","max-size":"16MB"}}),i("vuci-form-item-list",{attrs:{"uci-section":t,name:"local_port",label:e.$t("Local port"),help:e.$t("Specify local port which the MQTT will be listen to"),placeholder:"1883",initial:["1883"],rules:"port",depend:t.custom_enabled==="0",required:t.enabled==="1"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"allow_ra",label:e.$t("Enable remote access"),help:e.$t("Select to enable remote access"),depend:t.custom_enabled==="0"}})],1),i("tlt-card",{directives:[{name:"show",rawName:"v-show",value:e.customConfiguration,expression:"customConfiguration"}],attrs:{title:e.$t("Broker settings")}},[i("tlt-tabs",{attrs:{tabs:e.brokerTabs},scopedSlots:e._u([{key:"security",fn:function(){return[i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"use_tls_ssl",label:e.$t("Use TLS/SSL"),help:e.$t("Mark to use TLS/SSL for connection"),depend:t.custom_enabled==="0"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"tls_type",label:e.$t("TLS type"),help:e.$t("Select the type of TLS encryption"),options:e.tlsTypeOpts,depend:t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"require_certificate",label:e.$t("Require certificate"),help:e.$t("Demand client certificate and key from the client."),initial:"1",depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"device_sec_files",label:e.$t("Certificate files from device"),help:e.deviceFilesHint,depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0",rawhtml:""}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"ca_file",label:e.$t("CA file"),help:e.$t("Upload CA file"),depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&(t.device_sec_files==="0"||!t.device_sec_files)&&t.custom_enabled==="0","max-size":"16MB",required:t.enabled==="1"&&t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"cert_file",label:e.$t("Certificate file"),help:e.$t("Upload certificate file"),depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&(t.device_sec_files==="0"||!t.device_sec_files)&&t.custom_enabled==="0","max-size":"16MB",required:t.enabled==="1"&&t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"key_file",label:e.$t("Key file"),help:e.$t("Upload key file"),depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&(t.device_sec_files==="0"||!t.device_sec_files)&&t.custom_enabled==="0","max-size":"16MB",required:t.enabled==="1"&&t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"ca_file",label:e.$t("CA file"),help:e.$t("Select CA file"),options:e.caOptions,depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.device_sec_files==="1"&&t.custom_enabled==="0",required:t.enabled==="1"&&t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"cert_file",label:e.$t("Certificate file"),help:e.$t("Select certificate file"),options:e.certOptions,depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.device_sec_files==="1"&&t.custom_enabled==="0",required:t.enabled==="1"&&t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"key_file",label:e.$t("Key file"),help:e.$t("Select key file"),options:e.keyOptions,depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.device_sec_files==="1"&&t.custom_enabled==="0",required:t.enabled==="1"&&t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-select",{attrs:{"uci-section":t,name:"tls_version",label:e.$t("TLS version"),help:e.$t("Used TLS version"),options:e.tlsVersionOpts,initial:"all",depend:t.tls_type==="cert"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"psk",label:e.$t("Pre-Shared-Key"),help:e.$t("The pre-shared-key in hex format with no leading “0x”"),rules:"hexstring",maxlength:"128",depend:t.tls_type==="psk"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0","no-write":t.psk==="",placeholder:e.isPskSet?e.pskSetPlaceholder:"",required:!e.isPskSet}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"identity",label:e.$t("Identity"),help:e.$t("Specify the identity"),rules:"uciname",depend:t.tls_type==="psk"&&t.use_tls_ssl==="1"&&t.custom_enabled==="0",required:""}})]},proxy:!0},{key:"misc",fn:function(){return[i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"acl_file_path",label:e.$t("ACL file"),help:e.$t("Select ACL file"),depend:t.custom_enabled==="0"}}),i("vuci-form-item-upload",{attrs:{"uci-section":t,name:"password_file",label:e.$t("Password file"),help:e.$t("Uploads passwords/users file"),depend:t.custom_enabled==="0"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"persistence",label:e.$t("Persistence"),help:e.$t("If true, connection, subscription and message data will be written to the disk"),depend:t.custom_enabled==="0"}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"anonymous_access",label:e.$t("Allow anonymous"),initial:"0",help:e.$t("Allows anonymous access"),depend:t.custom_enabled==="0"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"max_queued_messages",label:e.$t("Max queued messages"),help:e.$t("The maximum number of QoS 1 and 2 messages to hold in a queue per client above those that are currently in-flight. Set to 0 for no maximum (not recommended)"),rules:"irange(0,65535)",placeholder:"1000",initial:"1000",depend:t.custom_enabled==="0"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"max_packet_size",label:e.$t("Maximum packet size"),help:e.$t("Maximum size of packet before it will be dropped"),placeholder:"1048576",rules:"irange(1, 268435456)",initial:"1048576",depend:t.custom_enabled==="0"}})]},proxy:!0}],null,!0)})],1)]}}],null,!0)}),i("vuci-typed-section",{directives:[{name:"show",rawName:"v-show",value:e.customConfiguration,expression:"customConfiguration"}],attrs:{type:"bridge",title:e.$t("Bridges"),"data-key":"bridgeData",columns:e.bridgeColumns,"edit-form":e.editModal,endpoints:e.customConfiguration?[{endpoint:"mqtt/bridge/config"}]:[],"uci-data":n,"after-delete":e.afterDelete,"add-validate":e.addValidate},scopedSlots:e._u([{key:"connection_name",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"connection_name"}})]}},{key:"client_enabled",fn:function({s:t}){return[i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"client_enabled"},on:{change:e.validateEnable}})]}},{key:"addForm",fn:function({addModel:t}){return[i("tlt-form-item-input",{attrs:{label:e.$t("Name of the new bridge instance"),prop:"connection_name",rules:"nospace",maxlength:"64",required:""},model:{value:t.connection_name,callback:function(s){e.$set(t,"connection_name",s)},expression:"addModel.connection_name"}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(n){e.formData=n},expression:"formData"}})},q=[],O=d(w,T,q,!1,null,null,null,null);return O.exports});

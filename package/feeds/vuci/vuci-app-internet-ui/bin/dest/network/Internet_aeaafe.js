(function(w,$){typeof exports=="object"&&typeof module<"u"?module.exports=$():typeof define=="function"&&define.amd?define($):(w=typeof globalThis<"u"?globalThis:w||self,w["network/Internet_js"]=$())})(this,function(){"use strict";/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */function w(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:i});else{var r=e.prototype._init;e.prototype._init=function(n){n===void 0&&(n={}),n.init=n.init?[i].concat(n.init):i,r.call(this,n)}}function i(){var n=this.$options;n.store?this.$store=typeof n.store=="function"?n.store():n.store:n.parent&&n.parent.$store&&(this.$store=n.parent.$store)}}var $=typeof window<"u"?window:typeof global<"u"?global:{},E=$.__VUE_DEVTOOLS_GLOBAL_HOOK__;function U(e){E&&(e._devtoolHook=E,E.emit("vuex:init",e),E.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(t,r){E.emit("vuex:mutation",t,r)},{prepend:!0}),e.subscribeAction(function(t,r){E.emit("vuex:action",t,r)},{prepend:!0}))}function y(e,t){Object.keys(e).forEach(function(r){return t(e[r],r)})}function k(e){return e!==null&&typeof e=="object"}function z(e){return e&&typeof e.then=="function"}function m(e,t){if(!e)throw new Error("[vuex] "+t)}function F(e,t){return function(){return e(t)}}var _=function(t,r){this.runtime=r,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},T={namespaced:{configurable:!0}};T.namespaced.get=function(){return!!this._rawModule.namespaced},_.prototype.addChild=function(t,r){this._children[t]=r},_.prototype.removeChild=function(t){delete this._children[t]},_.prototype.getChild=function(t){return this._children[t]},_.prototype.hasChild=function(t){return t in this._children},_.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},_.prototype.forEachChild=function(t){y(this._children,t)},_.prototype.forEachGetter=function(t){this._rawModule.getters&&y(this._rawModule.getters,t)},_.prototype.forEachAction=function(t){this._rawModule.actions&&y(this._rawModule.actions,t)},_.prototype.forEachMutation=function(t){this._rawModule.mutations&&y(this._rawModule.mutations,t)},Object.defineProperties(_.prototype,T);var b=function(t){this.register([],t,!1)};b.prototype.get=function(t){return t.reduce(function(r,i){return r.getChild(i)},this.root)},b.prototype.getNamespace=function(t){var r=this.root;return t.reduce(function(i,n){return r=r.getChild(n),i+(r.namespaced?n+"/":"")},"")},b.prototype.update=function(t){D([],this.root,t)},b.prototype.register=function(t,r,i){var n=this;i===void 0&&(i=!0),process.env.NODE_ENV!=="production"&&G(t,r);var o=new _(r,i);if(t.length===0)this.root=o;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],o)}r.modules&&y(r.modules,function(f,s){n.register(t.concat(s),f,i)})},b.prototype.unregister=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1],n=r.getChild(i);if(!n){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to unregister module '"+i+"', which is not registered");return}n.runtime&&r.removeChild(i)},b.prototype.isRegistered=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1];return r?r.hasChild(i):!1};function D(e,t,r){if(process.env.NODE_ENV!=="production"&&G(e,r),t.update(r),r.modules)for(var i in r.modules){if(!t.getChild(i)){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to add a new module '"+i+"' on hot reloading, manual reload is needed");return}D(e.concat(i),t.getChild(i),r.modules[i])}}var j={assert:function(e){return typeof e=="function"},expected:"function"},q={assert:function(e){return typeof e=="function"||typeof e=="object"&&typeof e.handler=="function"},expected:'function or object with "handler" function'},M={getters:j,mutations:j,actions:q};function G(e,t){Object.keys(M).forEach(function(r){if(t[r]){var i=M[r];y(t[r],function(n,o){m(i.assert(n),B(e,r,o,n,i.expected))})}})}function B(e,t,r,i,n){var o=t+" should be "+n+' but "'+t+"."+r+'"';return e.length>0&&(o+=' in module "'+e.join(".")+'"'),o+=" is "+JSON.stringify(i)+".",o}var p,v=function e(t){var r=this;t===void 0&&(t={}),!p&&typeof window<"u"&&window.Vue&&Z(window.Vue),process.env.NODE_ENV!=="production"&&(m(p,"must call Vue.use(Vuex) before creating a store instance."),m(typeof Promise<"u","vuex requires a Promise polyfill in this browser."),m(this instanceof e,"store must be called with the new operator."));var i=t.plugins;i===void 0&&(i=[]);var n=t.strict;n===void 0&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new b(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new p,this._makeLocalGettersCache=Object.create(null);var o=this,a=this,f=a.dispatch,s=a.commit;this.dispatch=function(d,h){return f.call(o,d,h)},this.commit=function(d,h,C){return s.call(o,d,h,C)},this.strict=n;var l=this._modules.root.state;N(this,l,[],this._modules.root),V(this,l),i.forEach(function(u){return u(r)});var c=t.devtools!==void 0?t.devtools:p.config.devtools;c&&U(this)},x={state:{configurable:!0}};x.state.get=function(){return this._vm._data.$$state},x.state.set=function(e){process.env.NODE_ENV!=="production"&&m(!1,"use store.replaceState() to explicit replace store state.")},v.prototype.commit=function(t,r,i){var n=this,o=O(t,r,i),a=o.type,f=o.payload,s=o.options,l={type:a,payload:f},c=this._mutations[a];if(!c){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown mutation type: "+a);return}this._withCommit(function(){c.forEach(function(d){d(f)})}),this._subscribers.slice().forEach(function(u){return u(l,n.state)}),process.env.NODE_ENV!=="production"&&s&&s.silent&&console.warn("[vuex] mutation type: "+a+". Silent option has been removed. Use the filter functionality in the vue-devtools")},v.prototype.dispatch=function(t,r){var i=this,n=O(t,r),o=n.type,a=n.payload,f={type:o,payload:a},s=this._actions[o];if(!s){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown action type: "+o);return}try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(f,i.state)})}catch(c){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in before action subscribers: "),console.error(c))}var l=s.length>1?Promise.all(s.map(function(c){return c(a)})):s[0](a);return new Promise(function(c,u){l.then(function(d){try{i._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(f,i.state)})}catch(h){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in after action subscribers: "),console.error(h))}c(d)},function(d){try{i._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(f,i.state,d)})}catch(h){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in error action subscribers: "),console.error(h))}u(d)})})},v.prototype.subscribe=function(t,r){return R(t,this._subscribers,r)},v.prototype.subscribeAction=function(t,r){var i=typeof t=="function"?{before:t}:t;return R(i,this._actionSubscribers,r)},v.prototype.watch=function(t,r,i){var n=this;return process.env.NODE_ENV!=="production"&&m(typeof t=="function","store.watch only accepts a function."),this._watcherVM.$watch(function(){return t(n.state,n.getters)},r,i)},v.prototype.replaceState=function(t){var r=this;this._withCommit(function(){r._vm._data.$$state=t})},v.prototype.registerModule=function(t,r,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),process.env.NODE_ENV!=="production"&&(m(Array.isArray(t),"module path must be a string or an Array."),m(t.length>0,"cannot register the root module by using registerModule.")),this._modules.register(t,r),N(this,this.state,t,this._modules.get(t),i.preserveState),V(this,this.state)},v.prototype.unregisterModule=function(t){var r=this;typeof t=="string"&&(t=[t]),process.env.NODE_ENV!=="production"&&m(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var i=A(r.state,t.slice(0,-1));p.delete(i,t[t.length-1])}),P(this)},v.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),process.env.NODE_ENV!=="production"&&m(Array.isArray(t),"module path must be a string or an Array."),this._modules.isRegistered(t)},v.prototype.hotUpdate=function(t){this._modules.update(t),P(this,!0)},v.prototype._withCommit=function(t){var r=this._committing;this._committing=!0,t(),this._committing=r},Object.defineProperties(v.prototype,x);function R(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function P(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;N(e,r,[],e._modules.root,!0),V(e,r,t)}function V(e,t,r){var i=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var n=e._wrappedGetters,o={};y(n,function(f,s){o[s]=F(f,e),Object.defineProperty(e.getters,s,{get:function(){return e._vm[s]},enumerable:!0})});var a=p.config.silent;p.config.silent=!0,e._vm=new p({data:{$$state:t},computed:o}),p.config.silent=a,e.strict&&Y(e),i&&(r&&e._withCommit(function(){i._data.$$state=null}),p.nextTick(function(){return i.$destroy()}))}function N(e,t,r,i,n){var o=!r.length,a=e._modules.getNamespace(r);if(i.namespaced&&(e._modulesNamespaceMap[a]&&process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate namespace "+a+" for the namespaced module "+r.join("/")),e._modulesNamespaceMap[a]=i),!o&&!n){var f=A(t,r.slice(0,-1)),s=r[r.length-1];e._withCommit(function(){process.env.NODE_ENV!=="production"&&s in f&&console.warn('[vuex] state field "'+s+'" was overridden by a module with the same name at "'+r.join(".")+'"'),p.set(f,s,i.state)})}var l=i.context=X(e,a,r);i.forEachMutation(function(c,u){var d=a+u;K(e,d,c,l)}),i.forEachAction(function(c,u){var d=c.root?u:a+u,h=c.handler||c;W(e,d,h,l)}),i.forEachGetter(function(c,u){var d=a+u;Q(e,d,c,l)}),i.forEachChild(function(c,u){N(e,t,r.concat(u),c,n)})}function X(e,t,r){var i=t==="",n={dispatch:i?e.dispatch:function(o,a,f){var s=O(o,a,f),l=s.payload,c=s.options,u=s.type;if((!c||!c.root)&&(u=t+u,process.env.NODE_ENV!=="production"&&!e._actions[u])){console.error("[vuex] unknown local action type: "+s.type+", global type: "+u);return}return e.dispatch(u,l)},commit:i?e.commit:function(o,a,f){var s=O(o,a,f),l=s.payload,c=s.options,u=s.type;if((!c||!c.root)&&(u=t+u,process.env.NODE_ENV!=="production"&&!e._mutations[u])){console.error("[vuex] unknown local mutation type: "+s.type+", global type: "+u);return}e.commit(u,l,c)}};return Object.defineProperties(n,{getters:{get:i?function(){return e.getters}:function(){return J(e,t)}},state:{get:function(){return A(e.state,r)}}}),n}function J(e,t){if(!e._makeLocalGettersCache[t]){var r={},i=t.length;Object.keys(e.getters).forEach(function(n){if(n.slice(0,i)===t){var o=n.slice(i);Object.defineProperty(r,o,{get:function(){return e.getters[n]},enumerable:!0})}}),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}function K(e,t,r,i){var n=e._mutations[t]||(e._mutations[t]=[]);n.push(function(a){r.call(e,i.state,a)})}function W(e,t,r,i){var n=e._actions[t]||(e._actions[t]=[]);n.push(function(a){var f=r.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},a);return z(f)||(f=Promise.resolve(f)),e._devtoolHook?f.catch(function(s){throw e._devtoolHook.emit("vuex:error",s),s}):f})}function Q(e,t,r,i){if(e._wrappedGetters[t]){process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate getter key: "+t);return}e._wrappedGetters[t]=function(o){return r(i.state,i.getters,o.state,o.getters)}}function Y(e){e._vm.$watch(function(){return this._data.$$state},function(){process.env.NODE_ENV!=="production"&&m(e._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,sync:!0})}function A(e,t){return t.reduce(function(r,i){return r[i]},e)}function O(e,t,r){return k(e)&&e.type&&(r=t,t=e,e=e.type),process.env.NODE_ENV!=="production"&&m(typeof e=="string","expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:r}}function Z(e){if(p&&e===p){process.env.NODE_ENV!=="production"&&console.error("[vuex] already installed. Vue.use(Vuex) should be called only once.");return}p=e,w(p)}var tt=L(function(e,t){var r={};return process.env.NODE_ENV!=="production"&&!S(t)&&console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),I(t).forEach(function(i){var n=i.key,o=i.val;r[n]=function(){var f=this.$store.state,s=this.$store.getters;if(e){var l=H(this.$store,"mapState",e);if(!l)return;f=l.context.state,s=l.context.getters}return typeof o=="function"?o.call(this,f,s):f[o]},r[n].vuex=!0}),r}),et=L(function(e,t){var r={};return process.env.NODE_ENV!=="production"&&!S(t)&&console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object"),I(t).forEach(function(i){var n=i.key,o=i.val;o=e+o,r[n]=function(){if(!(e&&!H(this.$store,"mapGetters",e))){if(process.env.NODE_ENV!=="production"&&!(o in this.$store.getters)){console.error("[vuex] unknown getter: "+o);return}return this.$store.getters[o]}},r[n].vuex=!0}),r});function I(e){return S(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function S(e){return Array.isArray(e)||k(e)}function L(e){return function(t,r){return typeof t!="string"?(r=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,r)}}function H(e,t,r){var i=e._modulesNamespaceMap[r];return process.env.NODE_ENV!=="production"&&!i&&console.error("[vuex] module namespace not found in "+t+"(): "+r),i}const g={_initializeTimer(e){return{id:0,method:e.method,time:e.time||1e3,immediate:e.immediate,force:e.force,autostart:e.autostart,edit:e.edit,spinner:e.spinner,isRunning:!1,destroyed:!1}},_getTimer(e,t){let r;switch(typeof t){case"function":r=e[t.name],r.autostart=!0;break;case"string":r=e[t],r.autostart=!0;break;default:if(!t.method)throw new Error("[timer]: method cannot be resumed, because it was not defined previously.");if(typeof t.method!="function")throw new Error("[timer]: provided method must be a function.");e[t.method.name]?(r=e[t.method.name],r.autostart=!0):(e[t.method.name]=this._initializeTimer(t),r=e[t.method.name])}return r},_filterTimers(e,t){let r=Object.values(t).filter(i=>i.autostart);switch(e){case"edit":r=r.filter(i=>!i.edit);break;case"spinner":r=r.filter(i=>!i.spinner);break}return r},_syncTimer(e){e.id=setTimeout((async function t(){e.isRunning&&(await e.method(),e.id=setTimeout(t.bind(this),e.time))}).bind(this),this._immediateStart(e))},_asyncTimer(e){e.id=setTimeout(()=>{e.isRunning&&(e.id=setInterval(()=>e.method(),e.time))},this._immediateStart(e))},_immediateStart(e){return e.immediate?0:e.time}},rt={methods:{timer(){let e={};this.$timer={start:t=>{const r=g._getTimer(e,t);r.isRunning||!r.autostart||r.destroyed||(r.isRunning=!0,r.force?g._asyncTimer(r):g._syncTimer(r))},stop:t=>{const r=g._getTimer(e,t);r&&(r.isRunning=!1,r.force?clearInterval(r.id):clearTimeout(r.id))},destroy:t=>{const r=g._getTimer(e,t);r&&(r.destroyed=!0)},update:t=>{const r=g._getTimer(e,t);if(!r)throw new Error("[timer]: cannot update a non existing timer.");r.isRunning&&this.$timer.stop(r.method),e[t.method.name]=g._initializeTimer(t),this.$timer.start(r.method)},stopAll:t=>{const r=g._filterTimers(t,e);r.length!==0&&r.forEach(i=>this.$timer.stop(i.method))},startAll:t=>{const r=g._filterTimers(t,e);r.length!==0&&r.forEach(i=>this.$timer.start(i.method))},destroyAll:t=>{Object.values(e).forEach(r=>this.$timer.destroy(r.method)),this.$timer.stopAll()},clear:()=>{this.$timer.stopAll(),e={}}}}},computed:{...et(["modalOpen"]),...tt(["spinning"])},watch:{modalOpen(e){e?this.$timer.stopAll("edit"):this.$timer.startAll("edit")},spinning(e){this.modalOpen||(e?this.$timer.stopAll("spinner"):this.$timer.startAll("spinner"))}},created(){this.timer()},beforeDestroy(){this.$timer.destroyAll()}};function it(e,t,r,i,n,o,a,f){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=r,s._compiled=!0),i&&(s.functional=!0),o&&(s._scopeId="data-v-"+o);var l;if(a?(l=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),n&&n.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(a)},s._ssrRegister=l):n&&(l=f?function(){n.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(s.functional){s._injectStyles=l;var c=s.render;s.render=function(h,C){return l.call(C),c(h,C)}}else{var u=s.beforeCreate;s.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:s}}const nt={mixins:[rt],data(){return{status:{}}},mounted(){this.$timer.start({method:this.getStatus,time:5e3,autostart:!0,immediate:!0})},methods:{getStatus(){return this.$axios.get("/api/internet_connection/status").then(({data:e})=>{this.status=e}).catch(()=>{this.$message.error(this.$t("Failed to load internet status data"))})}}};var ot=function(){var t=this,r=t._self._c;return r("vuci-form",{attrs:{config:"connchecker"},scopedSlots:t._u([{key:"default",fn:function({uciData:i}){return[r("tlt-card",{attrs:{title:t.$t("Status")}},[r("tlt-value-list",{staticClass:"w-80 max-md:w-full m-auto",attrs:{id:"internet_status","data-source":t.$network.parseInternetStatus(t.status)},scopedSlots:t._u([t._l(["ipv4_status_value","ipv6_status_value","dns_status_value"],function(n){return{key:n,fn:function({item:o}){return[r("span",{key:n,class:o.style},[t._v(" "+t._s(o.info)+" ")])]}}})],null,!0)})],1),r("vuci-named-section",{attrs:{"uci-data":i,title:t.$t("Configuration"),help:t.$t("Monitors the connectivity status of specified IPv4, IPv6, and DNS addresses. Repeatedly checks the connectivity status at specified intervals and reports changes"),"data-key":"internet",endpoints:[{endpoint:"internet_connection/global"}]},scopedSlots:t._u([{key:"default",fn:function({s:n}){return[r("vuci-form-item-switch",{attrs:{"uci-section":n,name:"enabled",label:t.$t("Enable"),help:t.$t("Enable internet monitoring")}}),r("vuci-form-item-input",{attrs:{"uci-section":n,name:"track_ipv4",label:t.$t("Track IPv4"),help:t.$t("IPv4 address to be monitored"),rules:"ip4addr"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,name:"track_ipv6",label:t.$t("Track IPv6"),help:t.$t("IPv6 address to be monitored"),rules:"ip6addr"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,name:"track_domain",label:t.$t("Track domain"),help:t.$t("Domain to be checked if alive"),rules:"hostname"}}),r("vuci-form-item-input",{attrs:{"uci-section":n,name:"interval",label:t.$t("Interval"),help:t.$t("The time interval in seconds at which the connectivity status should be checked"),rules:"irange(30,86400)",required:""}})]}}],null,!0)})]}}])})},st=[],at=it(nt,ot,st,!1,null,null,null,null);return at.exports});

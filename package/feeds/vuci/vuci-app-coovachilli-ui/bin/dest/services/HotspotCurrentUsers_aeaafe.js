(function(a,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(a=typeof globalThis<"u"?globalThis:a||self,a["services/HotspotCurrentUsers_js"]=u())})(this,function(){"use strict";function a(n,e,t,d,i,c,l,$){var s=typeof n=="function"?n.options:n;e&&(s.render=e,s.staticRenderFns=t,s._compiled=!0),d&&(s.functional=!0),c&&(s._scopeId="data-v-"+c);var r;if(l?(r=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),i&&i.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(l)},s._ssrRegister=r):i&&(r=$?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),r)if(s.functional){s._injectStyles=r;var g=s.render;s.render=function(v,f){return r.call(f),g(v,f)}}else{var m=s.beforeCreate;s.beforeCreate=m?[].concat(m,r):[r]}return{exports:n,options:s}}const u={data(){return{users:[],columns:[{dataIndex:"userName",title:this.$t("Username")},{dataIndex:"ipAddress",title:this.$t("IP")},{dataIndex:"macAddress",title:this.$t("MAC")},{dataIndex:"inputOctets",title:this.$t("Download")},{dataIndex:"outputOctets",title:this.$t("Upload")},{dataIndex:"sessionTime",title:this.$t("Session time")},{dataIndex:"startTime",title:this.$t("Start time")},{dataIndex:"logout",title:this.$t("Logout user")}]}},timers:{loadCurrentUsers:{time:3e3,autostart:!0,immediate:!0,repeat:!0}},methods:{loadCurrentUsers(){return this.$axios.get("/api/hotspot/user_management/status").then(n=>{const e=n.success?n.data:[];this.users=e.filter(t=>t.clientState).map(t=>({userName:t.session.userName||"-",ipAddress:t.ipAddress||"-",macAddress:t.macAddress||"-",inputOctets:t.accounting.inputOctets?"%MB".format(t.accounting.inputOctets):"0 B",outputOctets:t.accounting.outputOctets?"%MB".format(t.accounting.outputOctets):"0 B",startTime:t.session.startTime?this.$store.getters.localDate(Number(t.session.startTime)):"-",sessionTime:t.accounting.sessionTime?t.accounting.sessionTime+" s":"-"}))}).catch(()=>{this.$message.error(this.$t("Failed to load current user data"))})},logoutUser(n){return this.$axios.post("/api/hotspot/user_management/actions/logout_user",{data:{macaddress:n.macAddress}}).then(()=>{this.$message.success(this.$t("User logout successful"))}).catch(()=>{this.$message.error(this.$t("Failed to logout a user"))})}}};var h=function(){var e=this,t=e._self._c;return t("tlt-card",{attrs:{title:e.$t("Current hotspot users")}},[t("tlt-table",{attrs:{id:"hotspot_users",columns:e.columns,"data-source":e.users,"no-value-text":e.$t("No users currently connected")},scopedSlots:e._u([{key:"logout",fn:function({record:d}){return[t("tlt-button",{attrs:{id:"logout_"+d.macAddress},on:{click:function(i){return e.logoutUser(d)}}},[e._v(" "+e._s(e.$t("Logout"))+" ")])]}}])})],1)},p=[],_=a(u,h,p,!1,null,null,null,null);return _.exports});

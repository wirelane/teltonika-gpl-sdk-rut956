(function(a,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(a=typeof globalThis<"u"?globalThis:a||self,a["services/HotspotRegisteredUsers_js"]=d())})(this,function(){"use strict";function a(i,t,e,l,o,u,h,$){var s=typeof i=="function"?i.options:i;t&&(s.render=t,s.staticRenderFns=e,s._compiled=!0),l&&(s.functional=!0),u&&(s._scopeId="data-v-"+u);var n;if(h?(n=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),o&&o.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(h)},s._ssrRegister=n):o&&(n=$?function(){o.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:o),n)if(s.functional){s._injectStyles=n;var g=s.render;s.render=function(v,p){return n.call(p),g(v,p)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,n):[n]}return{exports:i,options:s}}const d={data(){return{users:[],columns:[{dataIndex:"email",title:this.$t("Email")},{dataIndex:"expiration",title:this.$t("Expiration time"),help:this.$t("Registration expiration time in seconds")},{dataIndex:"phone",title:this.$t("Phone")},{dataIndex:"date",title:this.$t("Registration date"),help:this.$t("The date is displayed according to your local timezone")},{dataIndex:"delete",title:this.$t("Delete user")}]}},timers:{loadRegisteredUsers:{time:3e3,autostart:!0,immediate:!0,repeat:!0}},methods:{loadRegisteredUsers(){return this.$axios.get("/api/hotspot/user_management/config").then(i=>{i.data.users.forEach(e=>{e.type="user"}),i.data.sms_users.forEach(e=>{e.type="sms_user"});const t=[...i.data.users,...i.data.sms_users];this.users=t.map(e=>({id:e.id,type:e.type,username:e.username||"-",expiration:e.expiration?e.expiration+" s":this.$t("Unlimited"),phone:e.phone||"-",email:e.email?e.email:"-",date:e.created?this.$store.getters.localDate(new Date(e.created.replace(" ","T")+"Z").getTime()/1e3):"-"}))}).catch(()=>{this.$message.error(this.$t("Failed to load registered hotspot users"))})},deleteUser(i){this.$prompt({title:this.$t("Delete user?"),content:this.$t("This process can not be undone."),okText:this.$t("Delete"),cancelText:this.$t("Cancel"),onOk:()=>this.$axios.delete(`/api/hotspot/user_management/config/${i.id}`,{data:{data:{user_type:i.type}}}).then(()=>{this.$message.success(this.$t("User deleted successfuly"))}).catch(()=>{this.$message.error(this.$t("Failed to delete a hotspot user"))})})}}};var f=function(){var t=this,e=t._self._c;return e("tlt-card",{attrs:{title:t.$t("Registered hotspot users")}},[e("tlt-table",{attrs:{id:"registered_hotspot_users",columns:t.columns,"data-source":t.users,"no-value-text":t.$t("No users registered")},scopedSlots:t._u([{key:"delete",fn:function({record:l}){return[e("tlt-button",{attrs:{id:"delete_"+l.id,size:"md",type:"text",color:"error"},on:{click:function(o){return t.deleteUser(l)}}},[t._v(" "+t._s(t.$t("Delete"))+" ")])]}}])})],1)},_=[],m=a(d,f,_,!1,null,null,null,null);return m.exports});

(function(l,d){typeof exports=="object"&&typeof module<"u"?module.exports=d():typeof define=="function"&&define.amd?define(d):(l=typeof globalThis<"u"?globalThis:l||self,l["services/HotspotUsers_js"]=d())})(this,function(){"use strict";function l(r,e,s,u,t,a,c,y){var n=typeof r=="function"?r.options:r;e&&(n.render=e,n.staticRenderFns=s,n._compiled=!0),u&&(n.functional=!0),a&&(n._scopeId="data-v-"+a);var i;if(c?(i=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__<"u"&&(o=__VUE_SSR_CONTEXT__),t&&t.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(c)},n._ssrRegister=i):t&&(i=y?function(){t.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:t),i)if(n.functional){n._injectStyles=i;var k=n.render;n.render=function(U,f){return i.call(f),k(U,f)}}else{var p=n.beforeCreate;n.beforeCreate=p?[].concat(p,i):[i]}return{exports:r,options:n}}const d={inject:["groups"]};var m=function(){var e=this,s=e._self._c;return s("vuci-form",{attrs:{config:"chilli",editing:""},scopedSlots:e._u([{key:"default",fn:function({uciData:u,editableSection:t}){return[s("vuci-named-section",{attrs:{"uci-data":u,name:t.id,title:e.$t("User '%s' settings").format(t.username),endpoints:[{endpoint:"hotspot/users/config"}],"data-key":"users"},scopedSlots:e._u([{key:"default",fn:function({s:a}){return[s("vuci-form-item-input",{attrs:{"uci-section":a,name:"password",label:e.$t("Password"),help:e.$t("Change the current password. %s Warning: %s remember the password because it will be hashed and you will not be able to view it again.").format("<br><b>","</b>"),rules:"credentials_validate",maxlength:"512",password:"",required:"",rawhtml:""}}),s("vuci-form-item-select",{attrs:{"uci-section":a,name:"group",label:e.$t("Group"),options:e.groups()}})]}}],null,!0)})]}}])})},h=[],_=l(d,m,h,!1,null,null,null,null);const v=_.exports,g={provide(){return{groups:this.getGroups}},data(){return{formData:{},columns:[{name:"username",label:this.$t("Username")},{name:"group",label:this.$t("Group")}],HotspotUserEdit:v,groups:[]}},methods:{getGroups(){return this.groups},groupOptionsMapping(r){return r.length!==0?r.map(e=>e.name):["",this.$t("No groups available")]},loadData(){return this.$axios.get("/api/hotspot/groups/config").then(r=>{this.groups=this.groupOptionsMapping(r.data)}).catch(()=>{this.$message.error(this.$t("Failed to load user group data"))})},addSection(r){return this.formData.users.some(s=>s.username===r.username)?{message:this.$t("User with username %s already exists").format(r.username),valid:!1}:{valid:!0}}}};var $=function(){var e=this,s=e._self._c;return s("vuci-form",{attrs:{config:"chilli","after-load":e.loadData},scopedSlots:e._u([{key:"default",fn:function({uciData:u}){return[s("vuci-typed-section",{attrs:{type:"user","uci-data":u,title:e.$t("Local users"),columns:e.columns,endpoints:[{endpoint:"hotspot/users/config"}],"data-key":"users","exception-options":["password"],"edit-form":e.HotspotUserEdit,"add-validate":e.addSection,"no-edit-after-create":"","add-title":e.$t("Add new user")},scopedSlots:e._u([{key:"username",fn:function({s:t}){return[s("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"username"}})]}},{key:"group",fn:function({s:t}){return[s("vuci-form-item-select",{attrs:{"uci-section":t,name:"group",options:e.groups}})]}},{key:"addForm",fn:function({addModel:t}){return[s("tlt-form-item-input",{attrs:{required:"",label:e.$t("Username"),prop:"username",rules:"credentials_validate",maxlength:"8"},model:{value:t.username,callback:function(a){e.$set(t,"username",a)},expression:"addModel.username"}}),s("tlt-form-item-password",{attrs:{label:e.$t("Password"),help:e.$t("%s Warning: %s remember the password because it will be hashed and you will not be able to view it again.").format("<b>","</b>"),rules:"credentials_validate",maxlength:"512",prop:"password",required:"",rawhtml:""},model:{value:t.password,callback:function(a){e.$set(t,"password",a)},expression:"addModel.password"}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(u){e.formData=u},expression:"formData"}})},b=[],w=l(g,$,b,!1,null,null,null,null);return w.exports});

(function(l,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(l=typeof globalThis<"u"?globalThis:l||self,l["services/Sstp_js"]=u())})(this,function(){"use strict";function l(s,e,t,c,n,i,f,w){var a=typeof s=="function"?s.options:s;e&&(a.render=e,a.staticRenderFns=t,a._compiled=!0),c&&(a.functional=!0),i&&(a._scopeId="data-v-"+i);var o;if(f?(o=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),n&&n.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(f)},a._ssrRegister=o):n&&(o=w?function(){n.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(a.functional){a._injectStyles=o;var y=a.render;a.render=function(C,m){return o.call(m),y(C,m)}}else{var d=a.beforeCreate;a.beforeCreate=d?[].concat(d,o):[o]}return{exports:s,options:a}}const u={inject:["certificates"],props:{section:{type:Object,default:()=>({})}},data(){return{formData:{},deviceFilesHelp:this.$t("Choose this option if you want to select certificate files from device. Certificate files can be generated %s here %s").format("<a class=link href='/system/admin/certificates/generation'>","</a>"),authOptions:[["noauth",this.$t("Noauth")],["refuse-pap",this.$t("Refuse-pap")],["refuse-eap",this.$t("Refuse-eap")],["refuse-chap",this.$t("Refuse-chap")],["refuse-mschap",this.$t("Refuse-mschap")]]}},computed:{cerfiticateOptions(){return this.certificates().map(s=>[`/etc/certificates/${s.fullname}`,s.fullname])}}};var p=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{config:"network",editing:""},scopedSlots:e._u([{key:"default",fn:function({uciData:c,editableSection:n}){return[t("vuci-named-section",{attrs:{endpoints:[{endpoint:"sstp/config"}],name:n.id,"uci-data":c,"data-key":"sstp",title:e.$t("SSTP instance: %s").format(n.id)},scopedSlots:e._u([{key:"default",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,label:e.$t("Enable"),help:e.$t("Enable SSTP tunnel"),name:"enabled"}}),t("vuci-form-item-input",{attrs:{"uci-section":i,label:e.$t("Server IP address or host name"),help:e.$t("IP address and port (optional, default 443) of the remote SSTP server. E.g. 1.2.3.4, 1.2.3.4:1234, example.com:12"),name:"server",placeholder:"0.0.0.0",rules:"url"}}),t("vuci-form-item-input",{attrs:{"uci-section":i,label:e.$t("User name"),name:"username",placeholder:e.$t("User"),rules:"credentials_validate",maxlength:"512"}}),t("vuci-form-item-input",{attrs:{"uci-section":i,label:e.$t("Password"),help:e.$t("All characters are allowed except ` and space"),name:"password",password:"",placeholder:e.$t("Password"),rules:"credentials_validate",maxlength:"512"}}),t("vuci-form-item-switch",{attrs:{"uci-section":i,label:e.$t("Certificate files from device"),help:e.deviceFilesHelp,name:"device_files",rawhtml:""}}),t("vuci-form-item-upload",{attrs:{"uci-section":i,name:"ca",label:e.$t("CA cert"),help:e.$t("Upload CA certificate in PEM format"),depend:i.device_files==="0","max-size":"16MB"}}),t("vuci-form-item-select",{attrs:{"uci-section":i,name:"ca",label:e.$t("CA cert"),help:e.$t("Upload CA certificate in PEM format"),options:e.cerfiticateOptions,depend:i.device_files==="1"}}),t("vuci-form-item-switch",{attrs:{"uci-section":i,label:e.$t("Default route"),help:e.$t(`When selected, this connection will become the device's default route.
              This means that all traffic directed to the Internet will go through the SSTP
              server and the server's IP address will be seen as this device's source IP to other hosts on the Internet.`),name:"defaultroute"}}),t("vuci-form-item-list",{attrs:{"uci-section":i,name:"sstp_options",label:e.$t("Auth options"),type:"tlt-select",options:e.authOptions,"allow-create":""}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(c){e.formData=c},expression:"formData"}})},h=[],v=l(u,p,h,!1,null,null,null,null);const _=v.exports,$={provide(){return{certificates:()=>this.certificates}},data(){return{editModal:_,deviceColumns:[{name:"name",label:this.$t("Tunnel name"),help:this.$t("Name of the tunnel. Used for easier tunnels management purpose only")},{name:"enabled"}],certificates:[]}},methods:{afterLoad(){return this.$axios.get("/api/certificates/ca/config").then(s=>{s.success||this.$message.error(this.$t("Failed to load certificate data")),this.certificates=s.success?s.data.certificates:[]}).catch(()=>{this.$message.error("An unexpected error occurred")})}}};var b=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{config:"network","after-load":e.afterLoad},scopedSlots:e._u([{key:"default",fn:function({uciData:c}){return[t("vuci-typed-section",{attrs:{type:"interface",title:e.$t("SSTP Configuration"),columns:e.deviceColumns,"edit-form":e.editModal,"data-key":"sstp","uci-data":c,endpoints:[{endpoint:"sstp/config"}],addremove:""},scopedSlots:e._u([{key:"name",fn:function({s:n}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":n,name:"id"}})]}},{key:"enabled",fn:function({s:n}){return[t("vuci-form-item-switch",{attrs:{"uci-section":n,name:"enabled"}})]}},{key:"addForm",fn:function({addModel:n}){return[t("tlt-form-item-input",{attrs:{label:e.$t("New configuration name"),prop:"id",help:e.$t("Name of the new SSTP configuration. Used for easier configurations management purpose only"),maxlength:"8",rules:"uciname",required:""},model:{value:n.id,callback:function(i){e.$set(n,"id",i)},expression:"addModel.id"}})]}}],null,!0)})]}}])})},g=[],S=l($,b,g,!1,null,null,null,null);return S.exports});

(function(u,f){typeof exports=="object"&&typeof module<"u"?module.exports=f():typeof define=="function"&&define.amd?define(f):(u=typeof globalThis<"u"?globalThis:u||self,u["network/ProtoOspf_js"]=f())})(this,function(){"use strict";function u(a,e,t,o,i,n,c,O){var r=typeof a=="function"?a.options:a;e&&(r.render=e,r.staticRenderFns=t,r._compiled=!0),o&&(r.functional=!0),n&&(r._scopeId="data-v-"+n);var l;if(c?(l=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__<"u"&&(s=__VUE_SSR_CONTEXT__),i&&i.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(c)},r._ssrRegister=l):i&&(l=O?function(){i.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(r.functional){r._injectStyles=l;var F=r.render;r.render=function(I,m){return l.call(m),F(I,m)}}else{var d=r.beforeCreate;r.beforeCreate=d?[].concat(d,l):[l]}return{exports:a,options:r}}const f={props:{section:{type:Object,default:()=>({})}},data(){return{authentication:[["none",this.$t("None")],["pass",this.$t("Password")],["md5_hmac",this.$t("MD5 HMAC")]],type:[["broadcast",this.$t("Broadcast")],["non-broadcast",this.$t("Non-Broadcast")],["point-to-point",this.$t("Point-to-Point")],["point-to-multipoint",this.$t("Point-to-Multipoint")]]}}};var p=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{editing:"",config:"ospf"},scopedSlots:e._u([{key:"default",fn:function({uciData:o,editableSection:i}){return[t("vuci-named-section",{attrs:{"uci-data":o,endpoints:[{endpoint:"ospf/interface/config"}],"data-key":"interface",name:i.id,title:e.$t("General Settings")},scopedSlots:e._u([{key:"default",fn:function({s:n,sd:c}){return[t("vuci-form-item-switch",{attrs:{"uci-section":n,name:"enabled",label:e.$t("Enable"),help:e.$t("Enable")}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"cost",label:e.$t("Cost"),help:e.$t("The cost value is set to router-LSAâ€™s metric field and used for SPF calculation."),rules:"irange(1,65535)"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"hello_interval",label:e.$t("Hello Interval"),help:e.$t("This value controls how frequently (every n seconds) a 'Hello' packet is sent out on the specified interface."),rules:"irange(1,65535)",initial:"10"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"dead_interval",label:e.$t("Router Dead Interval"),help:e.$t("This value must be the same for all routers attached to a common network."),rules:"irange(1,65535)",initial:"40"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"retransmit_interval",label:e.$t("Retransmit"),help:e.$t("This value is used when retransmitting Database Description and Link State Request packets."),rules:"irange(0,65535)",initial:"5"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"priority",label:e.$t("Priority"),help:e.$t("The router with the highest priority will be more eligible to become Designated Router. Setting the value to 0, makes the router ineligible to become Designated Router."),rules:"irange(0,255)",initial:"1"}}),t("vuci-form-item-select",{attrs:{"uci-section":n,name:"type",label:e.$t("Type"),help:e.$t("You can choose different type of configuration."),options:e.type}}),t("vuci-form-item-switch",{attrs:{"uci-section":n,name:"ptp_dmvpn",label:e.$t("Enable DMVPN"),help:e.$t("Enable this if you are using this OSPF point to point interface for DMVPN"),depend:n.type==="point-to-point"}}),t("vuci-form-item-select",{attrs:{"uci-section":n,name:"authentication",label:e.$t("Authentication"),help:e.$t("Connection authentification methods"),options:e.authentication}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"router_id",label:e.$t("ID"),rules:"irange(1,100)",depend:c.authentication=="md5_hmac"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"password",label:e.$t("Password"),rules:"credentials_validate",maxlength:"512",depend:c.authentication=="pass"||c.authentication=="md5_hmac"}})]}}],null,!0)})]}}])})},h=[],b=u(f,p,h,!1,null,null,null,null);const $=b.exports,v={props:{section:{type:Object,default:()=>({})}}};var g=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{editing:"",config:"ospf"},scopedSlots:e._u([{key:"default",fn:function({uciData:o,editableSection:i}){return[t("vuci-named-section",{attrs:{"uci-data":o,endpoints:[{endpoint:"ospf/neighbor/config"}],"data-key":"neighbor",name:i.id,title:e.$t("OSPF Neighbor configuration")},scopedSlots:e._u([{key:"default",fn:function({s:n}){return[t("vuci-form-item-switch",{attrs:{"uci-section":n,name:"enabled",label:e.$t("Enable"),help:e.$t("Enable")}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"neighbor",label:e.$t("Neighbor"),help:e.$t("OSPF Neighbor IPv4 Address"),rules:"ip4addr"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"priority",label:e.$t("Neighbor Priority"),help:e.$t("Priority for this neighbor"),rules:"irange(0,255)"}}),t("vuci-form-item-input",{attrs:{"uci-section":n,name:"polling_interval",label:e.$t("Polling interval"),help:e.$t("Dead Neighbor Polling interval in seconds"),rules:"irange(1,65535)",inital:"120",placeholder:"120"}})]}}],null,!0)})]}}])})},_=[],y=u(v,g,_,!1,null,null,null,null);const k=y.exports,w={data(){return{formData:{area:[],interface:[],neighbor:[],network:[],ospf:[]},protoOspfInterfaceEdit:$,ospfNeighborsEdit:k,ospfInterface:[{name:"ifname",label:this.$t("Interface"),help:this.$t("Indicates whether a configuration is active or not")},{name:"enabled"}],ospfArea:[{name:"id",label:this.$t("Name"),help:this.$t("")},{name:"area",label:this.$t("Area"),help:this.$t("Area code. IPv4 address or 32bit integer")},{name:"stub",label:this.$t("Stub"),help:this.$t("Toggle area to be stub")},{name:"enabled"}],ospfNetwork:[{name:"id",label:this.$t("Name"),help:this.$t("")},{name:"net",label:this.$t("Network"),help:this.$t("Network address and netmask")},{name:"area",label:this.$t("Area"),help:this.$t("Selection from created areas")},{name:"enabled"}],ospfNeighbors:[{name:"neighbor",label:this.$t("Neighbor")},{name:"priority",label:this.$t("Neighbor priority")},{name:"polling_interval",label:this.$t("Polling interval")},{name:"enabled"}],redistributeOptions:[["connected",this.$t("Connected")],["kernel",this.$t("Kernel")],["nhrp","NHRP"],["bgp","BGP"],["rip","RIP"],["eigrp","EIGRP"],["static",this.$t("Static")]],ifStatus:[],ifConfig:[],originate:[["off",this.$t("Off")],["default",this.$t("Default")],["always",this.$t("Always")]]}},computed:{area(){return this.formData.area.map(a=>[a.id,a.id])}},methods:{afterLoad(a){return this.loadNeighborsInfo(a),this.$axios.bulkGet(["/api/interfaces/config","/api/interfaces/status"]).then(([e,t])=>{e.success?this.ifConfig=e.data:this.$message.error(this.$t("Failed to load interface configuration")),t.success?this.ifStatus=t.data:this.$message.error(this.$t("Failed to load interface status"))}).catch(()=>{this.$message.error(this.$t("Unexpected error occurred"))})},loadNeighborsInfo(a){a.interface.some(e=>["point-to-multipoint","non-broadcast"].includes(e.typ))||this.$alert.info(this.$t("OSPF neighbors works only when an interface with type 'Non-Broadcast' or 'Point-to-Multipoint' is configured"))},areaValidation(a,e){this.$VuciValidator.value=a;const t=this.$VuciValidator.ip4addr();return a>=0&&a<=4294967295||t.isValid?{isValid:!0}:this.formData.area.some(i=>i.id!==e.id&&i.area===a)?{isValid:!1,message:this.$t("Area value must be unique")}:{isValid:!1,message:this.$t("Area must have value of IPv4 address or number from 0 to 4294967295")}}}};var P=function(){var e=this,t=e._self._c;return t("vuci-form",{attrs:{"after-load":e.afterLoad,"bulk-request":"",config:"ospf;network"},scopedSlots:e._u([{key:"default",fn:function({uciData:o}){return[t("vuci-named-section",{attrs:{"uci-data":o,endpoints:[{endpoint:"ospf/global"}],"data-key":"ospf",title:e.$t("OSPF - Global Settings")},scopedSlots:e._u([{key:"default",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"enabled",label:e.$t("Enable service"),help:e.$t("Enable/Disable OSPF protocol")}}),t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"enabled_vty",label:e.$t("Enable vty"),help:e.$t("Enable/Disable vty access from LAN")}}),t("vuci-form-item-upload",{attrs:{"uci-section":i,name:"ospfd_custom_conf",label:e.$t("Import config"),help:e.$t("Use imported OSPF configuration")}}),t("vuci-form-item-input",{attrs:{"uci-section":i,name:"router_id",label:e.$t("Router ID"),help:e.$t("OSPF router ID in IPv4 address format"),rules:"ip4addr"}}),t("vuci-form-item-select",{attrs:{"uci-section":i,name:"passive_ifname",label:e.$t("Passive interfaces"),help:e.$t("OSPF hello packets are not sent on these interfaces."),options:e.$network.interfaceOptions(e.ifStatus),multiple:""}}),t("vuci-form-item-select",{attrs:{"uci-section":i,name:"originate",label:e.$t("Generate a default external route"),help:`<b>${e.$t("Default")}</b> - ${e.$t("Advertises the default route if the route is in the route table.")}<br>              <b>${e.$t("Always")}</b> - ${e.$t("Specifies to always advertise the default route regardless of whether the route table has a default route.")}`,options:e.originate,rawhtml:""}}),t("vuci-form-item-select",{attrs:{"uci-section":i,name:"redistribute",label:e.$t("Redistribution options"),help:e.$t("Route redistribution is a process that allows a network to use a routing protocol to dynamically route traffic based on information learned from a different routing protocol."),options:e.redistributeOptions,maxlength:"32",multiple:"","allow-create":""}})]}}],null,!0)}),t("vuci-typed-section",{attrs:{type:"ospf_interface",title:e.$t("OSPF interfaces"),"uci-data":o,endpoints:[{endpoint:"ospf/interface/config"}],"data-key":"interface",columns:e.ospfInterface,"edit-form":e.protoOspfInterfaceEdit},scopedSlots:e._u([{key:"ifname",fn:function({s:i}){return[t("vuci-form-item-select",{attrs:{"uci-section":i,name:"ifname",options:e.$network.interfaceOptions(e.ifStatus)}})]}},{key:"enabled",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"enabled"}})]}}],null,!0)}),t("vuci-typed-section",{attrs:{type:"ospf_neighbor",title:e.$t("OSPF neighbors"),"uci-data":o,endpoints:[{endpoint:"ospf/neighbor/config"}],"data-key":"neighbor",columns:e.ospfNeighbors,"edit-form":e.ospfNeighborsEdit},scopedSlots:e._u([{key:"neighbor",fn:function({s:i}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":i,name:"neighbor"}})]}},{key:"priority",fn:function({s:i}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":i,name:"priority"}})]}},{key:"polling_interval",fn:function({s:i}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":i,name:"polling_interval"}})]}},{key:"enabled",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"enabled"}})]}}],null,!0)}),t("vuci-typed-section",{ref:"ospfArea",attrs:{type:"ospf_area","uci-data":o,endpoints:[{endpoint:"ospf/area/config"}],"data-key":"area",title:e.$t("OSPF area"),columns:e.ospfArea},scopedSlots:e._u([{key:"id",fn:function({s:i}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":i,name:"id"}})]}},{key:"area",fn:function({s:i}){return[t("vuci-form-item-input",{attrs:{"uci-section":i,name:"area",rules:[n=>e.areaValidation(n,i)],placeholder:"32156",required:""}})]}},{key:"stub",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"stub"}})]}},{key:"enabled",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"enabled"}})]}},{key:"addForm",fn:function({addModel:i}){return[t("tlt-form-item-input",{attrs:{label:e.$t("Name"),prop:"id",maxlength:"32",rules:"uciname",required:""},model:{value:i.id,callback:function(n){e.$set(i,"id",n)},expression:"addModel.id"}})]}}],null,!0)},[e._v("> ")]),t("vuci-typed-section",{attrs:{type:"ospf_network",title:e.$t("OSPF networks"),"uci-data":o,endpoints:[{endpoint:"ospf/network/config"}],"data-key":"network",columns:e.ospfNetwork,addremove:""},scopedSlots:e._u([{key:"id",fn:function({s:i}){return[t("vuci-form-item-dummy",{attrs:{"uci-section":i,name:"id"}})]}},{key:"net",fn:function({s:i}){return[t("vuci-form-item-input",{attrs:{"uci-section":i,name:"net",placeholder:"0.0.0.0/24",rules:"subnet4"}})]}},{key:"area",fn:function({s:i}){return[t("vuci-form-item-select",{attrs:{"uci-section":i,name:"area",options:e.area,"force-write":""}})]}},{key:"enabled",fn:function({s:i}){return[t("vuci-form-item-switch",{attrs:{"uci-section":i,name:"enabled"}})]}},{key:"addForm",fn:function({addModel:i}){return[t("tlt-form-item-input",{attrs:{label:e.$t("Name"),prop:"id",maxlength:"32",rules:"uciname",required:""},model:{value:i.id,callback:function(n){e.$set(i,"id",n)},expression:"addModel.id"}})]}}],null,!0)},[e._v("> ")])]}}]),model:{value:e.formData,callback:function(o){e.formData=o},expression:"formData"}})},S=[],N=u(w,P,S,!1,null,null,null,null);return N.exports});

(function(c,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(c=typeof globalThis<"u"?globalThis:c||self,c["services/Communities_js"]=u())})(this,function(){"use strict";function c(o,e,i,n,t,a,d,M){var s=typeof o=="function"?o.options:o;e&&(s.render=e,s.staticRenderFns=i,s._compiled=!0),n&&(s.functional=!0),a&&(s._scopeId="data-v-"+a);var m;if(d?(m=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__<"u"&&(r=__VUE_SSR_CONTEXT__),t&&t.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(d)},s._ssrRegister=m):t&&(m=M?function(){t.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:t),m)if(s.functional){s._injectStyles=m;var g=s.render;s.render=function(C,f){return m.call(f),g(C,f)}}else{var l=s.beforeCreate;s.beforeCreate=l?[].concat(l,m):[m]}return{exports:o,options:s}}const u={inject:["validateName"],props:{section:{type:Object,required:!0}},data(){return{accessModes:[["ro",this.$t("Read-Only")],["rw",this.$t("Read-Write")]]}},computed:{isSec6(){return this.section[".type"]==="com2sec6"},sectionTitle(){return this.isSec6?"SNMPv6":"SNMP"},sectionKey(){return this.isSec6?"communities_v6":"communities"}}};var h=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"snmpd",editing:""},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-named-section",{attrs:{name:e.section.id,title:e.$t("%s community").format(e.sectionTitle),help:e.$t("This section is used to configure the settings of the %s community. Scroll your mouse pointer over field names in order to see helpful hints.").format(e.sectionTitle),"uci-data":n,"data-key":e.sectionKey,endpoints:[{endpoint:`snmp/${e.sectionKey}/config`}]},scopedSlots:e._u([{key:"default",fn:function({s:t}){return[i("vuci-form-item-input",{attrs:{"uci-section":t,label:e.$t("Community name"),help:e.$t("%s community name is an ID that allows access to a routers %s data.").format(e.sectionTitle),name:"community",rules:a=>e.validateName.bind(a,e.isSec6,t),maxlength:"31",required:""}}),i("vuci-form-item-input",{attrs:{"uci-section":t,label:e.$t("IP address"),help:e.$t("IP address for the community."),name:"ipaddr",placeholder:"0.0.0.0",rules:"ip4addr",depend:!e.isSec6,required:""}}),i("vuci-form-item-input",{attrs:{"uci-section":t,label:e.$t("IP mask"),help:e.$t("Netmask for the IP address."),name:"netmask",placeholder:"0",rules:"irange(0,32)",depend:!e.isSec6,required:""}}),i("vuci-form-item-input",{attrs:{"uci-section":t,label:e.$t("Source"),name:"source",rules:"ipmask6host",depend:e.isSec6,required:""}}),i("vuci-form-item-select",{attrs:{"uci-section":t,label:e.$t("Access mode"),help:e.$t("Access mode specifies if you can only read or read and write information from and to the device."),name:"secname",options:e.accessModes}})]}}],null,!0)})]}}])})},p=[],y=c(u,h,p,!1,null,null,null,null);const v=y.exports,_={provide(){return{validateName:this.validateName}},data(){return{formData:{},communitiesEdit:v,communityColumns:[{name:"community",label:this.$t("Community name"),help:this.$t("SNMP community name is an ID that allows access to a device's SNMP data.")},{name:"ipaddr",label:this.$t("IP address"),help:this.$t("IP address of the community.")},{name:"netmask",label:this.$t("IP mask"),help:this.$t("Netmask for the IP address.")},{name:"secname",label:this.$t("Access mode"),help:this.$t("Access mode specifies if you can only read or read and write information from and to the device.")}],communityV6Columns:[{name:"community",label:this.$t("Community name"),help:this.$t("SNMPv6 community name is an ID that allows access to a device's SNMPv6 data.")},{name:"source",label:this.$t("Source")},{name:"secname",label:this.$t("Access mode"),help:this.$t("Access mode specifies if you can only read or read and write information from and to the device.")}],accessModes:{ro:this.$t("Read-Only"),rw:this.$t("Read-Write")},errorMessages:{1:this.$t("SNMP service requires at least one community instance when it is enabled."),default:this.$t("Failed to delete configuration")}}},methods:{returnErrorMessage(o){const e=o.data.errors[0].code;return this.errorMessages[e]||this.errorMessages.default},validateName(o,e,i){return!o&&this.formData.communities.some(n=>n.id!==e.id&&n.community===i)?{isValid:!1,message:this.$t("SNMP Community with the same name already exists")}:o&&this.formData.communities_v6.some(n=>n.id!==e.id&&n.community===i)?{isValid:!1,message:this.$t("SNMP Community V6 with the same name already exists")}:{isValid:!0}}}};var $=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"snmpd"},scopedSlots:e._u([{key:"default",fn:function({uciData:n}){return[i("vuci-typed-section",{attrs:{type:"com2sec",title:e.$t("SNMP community"),help:e.$t("This section is used to add new SNMP communities."),"uci-data":n,"data-key":"communities",endpoints:[{endpoint:"snmp/communities/config"}],columns:e.communityColumns,"edit-form":e.communitiesEdit,"error-handlers":{delete:e.returnErrorMessage},"form-methods":["get","delete","create"]},scopedSlots:e._u([{key:"community",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"community"}})]}},{key:"ipaddr",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"ipaddr"}})]}},{key:"netmask",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"netmask"}})]}},{key:"secname",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"secname","display-value":a=>e.accessModes[a]}})]}}],null,!0)}),i("vuci-typed-section",{attrs:{type:"com2sec6",title:e.$t("SNMPv6 community"),help:e.$t("This section is used to add new SNMPv6 communities."),"uci-data":n,"data-key":"communities_v6",endpoints:[{endpoint:"snmp/communities_v6/config"}],columns:e.communityV6Columns,"edit-form":e.communitiesEdit,"error-handlers":{delete:e.returnErrorMessage},"form-methods":["get","delete","create"]},scopedSlots:e._u([{key:"community",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"community"}})]}},{key:"source",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"source"}})]}},{key:"secname",fn:function({s:t}){return[i("vuci-form-item-dummy",{attrs:{"uci-section":t,name:"secname","display-value":a=>e.accessModes[a]}})]}}],null,!0)})]}}]),model:{value:e.formData,callback:function(n){e.formData=n},expression:"formData"}})},S=[],k=c(_,$,S,!1,null,null,null,null);return k.exports});

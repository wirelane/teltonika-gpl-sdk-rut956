(function(l,c){typeof exports=="object"&&typeof module<"u"?module.exports=c():typeof define=="function"&&define.amd?define(c):(l=typeof globalThis<"u"?globalThis:l||self,l["services/Snmp_js"]=c())})(this,function(){"use strict";function l(o,e,i,a,t,d,m,b){var n=typeof o=="function"?o.options:o;e&&(n.render=e,n.staticRenderFns=i,n._compiled=!0),a&&(n.functional=!0),d&&(n._scopeId="data-v-"+d);var r;if(m?(r=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__<"u"&&(s=__VUE_SSR_CONTEXT__),t&&t.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(m)},n._ssrRegister=r):t&&(r=b?function(){t.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:t),r)if(n.functional){n._injectStyles=r;var $=n.render;n.render=function(y,f){return r.call(f),$(y,f)}}else{var u=n.beforeCreate;n.beforeCreate=u?[].concat(u,r):[r]}return{exports:o,options:n}}const c={data(){return{formData:{},ipTypes:[["ipv4",this.$t("IPv4")],["ipv6",this.$t("IPv6")],["ipv4v6",this.$t("IPv4 and IPv6")]],errorMessages:{2:this.$t("At least one community configuration must exist to enable the SNMP service."),default:this.$t("Failed to edit configuration")},firewallInstalled:this.$store.getters.hasPackages("firewall")}},methods:{downloadMib(){return this.$utils.downloadFileApi("/api/snmp/system/actions/download_mib","text/plain","POST").catch(o=>{this.$message.error(this.$t("Failed to download MIB file"))})},onBeforeSave(){const o=this.formData.settings[0];return o.enabled==="1"&&o.v1mode==="0"&&o.v2cmode==="0"&&o.v3mode==="0"?Promise.reject(this.$t("Can't enable SNMP, without selected SNMP mode")):Promise.resolve()},returnErrorMessage(o){const e=o.data.errors[0].code;return this.errorMessages[e]||this.errorMessages.default}}};var p=function(){var e=this,i=e._self._c;return i("vuci-form",{attrs:{config:"snmpd","before-save":e.onBeforeSave},scopedSlots:e._u([{key:"default",fn:function({uciData:a}){return[i("vuci-named-section",{attrs:{name:"general",title:e.$t("SNMP agent settings"),help:e.$t("Configure main SNMP settings."),"uci-data":a,"data-key":"settings",endpoints:[{endpoint:"snmp/agent/config"}],"error-handlers":{edit:e.returnErrorMessage}},scopedSlots:e._u([{key:"default",fn:function({s:t}){return[i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"enabled",label:e.$t("Enable SNMP service"),help:e.$t("Enable SNMP (Simple Network Management Protocol) service on systems startup.")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"allow_ra",label:e.$t("Enable remote access"),help:e.$t("Create a firewall rule that allows access to SNMP for remote hosts."),depend:e.firewallInstalled}}),i("vuci-form-item-select",{attrs:{"uci-section":t,label:e.$t("IP type"),help:e.$t("IP type used by SNMP."),name:"ip_type",options:e.ipTypes,initial:"ipv4"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"port",label:e.$t("Port"),help:e.$t("TCP/UDP port number used for the connection."),placeholder:"161",initial:"161",rules:"port",required:""}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"v1mode",label:e.$t("SNMP v1 mode"),help:e.$t("Enable SNMP v1 compatibility.")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"v2cmode",label:e.$t("SNMP v2c mode"),help:e.$t("Enable SNMP v2 compatibility.")}}),i("vuci-form-item-switch",{attrs:{"uci-section":t,name:"v3mode",label:e.$t("SNMP v3 mode"),help:e.$t("Enable SNMP v3 compatibility.")}})]}}],null,!0)}),i("vuci-named-section",{attrs:{title:e.$t("SNMP system summary"),help:e.$t("Here you can configure basic SNMP attributes."),"uci-data":a,"data-key":"system",endpoints:[{endpoint:"snmp/system/config",sectionFilter:t=>t.find(d=>d[".type"]==="system")}]},scopedSlots:e._u([{key:"default",fn:function({s:t}){return[i("vuci-form-item-button",{attrs:{"uci-section":t,name:"downloadMib",label:e.$t("MIB file"),help:e.$t("Click to download the MIB file intended for this device."),text:e.$t("Download")},on:{click:e.downloadMib}}),i("vuci-form-item-dummy",{attrs:{"uci-section":t,label:e.$t("System OID"),help:e.$t("An OID is an Object Identifier. It's an address used to identify devices and their statuses."),name:"oid"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"sysLocation",label:e.$t("Location"),help:e.$t("Location of the system. If the field is empty, the option will have read-write permissions. If not, the option will become read-only."),placeholder:"location"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"sysContact",label:e.$t("Contact"),help:e.$t("Contact information. If the field is empty, the option will have read-write permissions. If not, the option will become read-only."),placeholder:"email@example.com",maxlength:"255"}}),i("vuci-form-item-input",{attrs:{"uci-section":t,name:"sysName",label:e.$t("Name"),help:e.$t("Name of the system. If the field is empty, the option will have read-write permissions. If not, the option will become read-only."),placeholder:"name",rules:"host"}})]}}],null,!0)})]}},{key:"form-buttons",fn:function({save:a}){return[i("div",{staticClass:"save-button"},[e._t("footerButtons"),i("tlt-button",{attrs:{"button-id":"saveandapply"},on:{click:()=>a()}},[e._v(" "+e._s(e.$t("Save & Apply"))+" ")])],2)]}}],null,!0),model:{value:e.formData,callback:function(a){e.formData=a},expression:"formData"}})},h=[],v=l(c,p,h,!1,null,null,null,null);return v.exports});

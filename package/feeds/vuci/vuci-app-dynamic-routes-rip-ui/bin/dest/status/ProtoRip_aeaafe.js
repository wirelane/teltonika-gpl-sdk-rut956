(function(f,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(f=typeof globalThis<"u"?globalThis:f||self,f["status/ProtoRip_js"]=u())})(this,function(){"use strict";function f(s,t,i,r,d,c,a,n){var e=typeof s=="function"?s.options:s;t&&(e.render=t,e.staticRenderFns=i,e._compiled=!0),r&&(e.functional=!0),c&&(e._scopeId="data-v-"+c);var o;if(a?(o=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),d&&d.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(a)},e._ssrRegister=o):d&&(o=n?function(){d.call(this,(e.functional?this.parent:this).$root.$options.shadowRoot)}:d),o)if(e.functional){e._injectStyles=o;var b=e.render;e.render=function(v,p){return o.call(p),b(v,p)}}else{var h=e.beforeCreate;e.beforeCreate=h?[].concat(h,o):[o]}return{exports:s,options:e}}const u={data(){return{firstLoad:!0,cards:[],tableColumns:[{dataIndex:"Network",title:this.$t("Network")},{dataIndex:"NextHop",title:this.$t("NextHop")},{dataIndex:"Metric",title:this.$t("Metric")},{dataIndex:"From",title:this.$t("From")},{dataIndex:"Tag",title:this.$t("Tag")},{dataIndex:"Time",title:this.$t("Time")}],cardsColumns:[{name:"interface",label:this.$t("Interface")},{name:"sendreceive",label:this.$t("Send/Receive")},{name:"badpackets",label:this.$t("Bad packets")},{name:"badroutes",label:this.$t("Bad routes")},{name:"distance",label:this.$t("Distance")},{name:"lastUpdate",label:this.$t("Last Update")}]}},created(){this.$spin(),this.$timer.start("getData")},methods:{getData(){return this.$axios.get("/api/rip/status").then(({data:s})=>{if(s){const t=[],i="sources",r=Object.keys(s[i]),d=s[i].sendreceive,c=s[i].Interface;for(let a=0;a<r.length-2;a++){const n=s[i],e=a+1,o={sendreceive:d||"-",interface:c||"-",badpackets:n[r[a]].Badpackets||"-",distance:n[r[a]].Distance||"-",badroutes:n[r[a]].Badroutes||"-",lastUpdate:n[r[a]].LastUpdate||"-"};t.push({title:n[r[a]].Gateway||"-",data:o,tableData:this.getTableData(s,e,i,n,r)})}this.cards=t}}).catch(()=>{this.$message.error(this.$t("Failed to load rip data"))}).finally(()=>{this.$spin(!1),this.firstLoad&&(this.firstLoad=!1)})},getTableData(s,t,i,r,d){const c=[],a=Object.keys(s);for(let n=0;n<a.length;n++){const e=s[a[n]];a[n]!==i&&e.From===r[d[t-1]].Gateway&&e.Type==="R(n)"&&c.push({Network:e.Network||"-",NextHop:e.NextHop||"-",Metric:e.Metric||"-",From:e.From||"-",Tag:e.Tag||"-",Time:e.Time||"-"})}return c}},timers:{getData:{time:1e4,immediate:!0,repeat:!0}}};var m=function(){var t=this,i=t._self._c;return i("tlt-card",{attrs:{sid:"rip_routes",title:"RIP"}},[t.cards.length!==0?i("tlt-routing-card",{attrs:{cards:t.cards,"table-columns":t.tableColumns,"cards-columns":t.cardsColumns}}):i("div",[t._v(" "+t._s(t.$t("There are no neighbours"))+" ")])],1)},_=[],$=f(u,m,_,!1,null,null,null,null);return $.exports});
